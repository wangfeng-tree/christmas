<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Merry Christmas</title>
<style>
body{
    margin:0;
    background:#000;
    color:#fff;
    text-align:center;
    overflow:hidden;
    font-family:Arial,"PingFang SC";
}
canvas{display:block}
h1{margin-top:30px}
.name{font-size:36px;color:#ffd700;margin-top:10px}
.tip{position:fixed;bottom:20px;width:100%;font-size:14px;opacity:.8}
</style>
</head>
<body>

<h1>ğŸ„ Merry Christmas ğŸ„</h1>
<div class="name" id="name"></div>
<canvas id="c"></canvas>
<div class="tip">ç‚¹å‡»å±å¹•æ’­æ”¾éŸ³ä¹ ğŸ¶</div>

<audio id="music" loop>
<source src="https://cdn.pixabay.com/download/audio/2022/12/02/audio_4d6a3b3a6d.mp3">
</audio>

<script>
// ===== åå­— =====
const params = new URLSearchParams(location.search);
document.getElementById("name").innerText =
    params.get("name") || "äº²çˆ±çš„æœ‹å‹";

// ===== Canvas =====
const c = document.getElementById("c");
const ctx = c.getContext("2d");

function resize(){
    c.width = innerWidth;
    c.height = innerHeight;
}
resize();
onresize = resize;

// ===== ç¯ =====
const lights = [];
const colors = ["red","gold","lime","cyan","magenta"];

for(let i=0;i<500;i++){
    const level = Math.random();
    const y = c.height*0.75 - level*c.height*0.6;
    const spread = (c.height*0.75 - y)*0.6;
    lights.push({
        x: c.width/2 + (Math.random()-0.5)*spread,
        y,
        r: Math.random()*2 + 1,
        a: Math.random(),
        s: Math.random()*0.05 + 0.01,
        color: colors[Math.floor(Math.random()*colors.length)]
    });
}

// ===== åŠ¨ç”» =====
function draw(){
    ctx.clearRect(0,0,c.width,c.height);

    lights.forEach(l=>{
        l.a += l.s;
        if(l.a>1 || l.a<0.2) l.s *= -1;

        ctx.globalAlpha = l.a;
        ctx.fillStyle = l.color;
        ctx.beginPath();
        ctx.arc(l.x,l.y,l.r,0,Math.PI*2);
        ctx.fill();
    });

    ctx.globalAlpha = 1;
    requestAnimationFrame(draw);
}
draw();

// ===== å¾®ä¿¡éŸ³ä¹ =====
let played=false;
document.body.addEventListener("click",()=>{
    if(!played){
        document.getElementById("music").play();
        played=true;
    }
});
</script>

</body>
</html>
