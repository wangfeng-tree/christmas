<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>Merry Christmas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
    margin:0;
    padding:0;
    background:#000;
    overflow:hidden;
}
canvas{display:block}
.text{
    position:absolute;
    left:5%;
    top:40%;
    color:#fff;
    font-size:32px;
    font-family:"Times New Roman",serif;
    opacity:.85;
}
</style>
</head>
<body>

<div class="text">Merry Christmas</div>
<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

function resize(){
    canvas.width = innerWidth;
    canvas.height = innerHeight;
}
resize();
window.onresize = resize;

// ========= 参数 =========
const TREE_PARTS = 1800;
const SNOW_PARTS = 400;
const particles = [];
const snow = [];

const centerX = () => canvas.width/2;
const baseY   = () => canvas.height*0.75;

// ========= 树粒子 =========
for(let i=0;i<TREE_PARTS;i++){
    const t = Math.random();
    const angle = t * 12 * Math.PI;
    particles.push({
        t,
        angle,
        speed: Math.random()*0.002 + 0.001,
        size: Math.random()*1.5 + 0.5
    });
}

// ========= 雪 =========
for(let i=0;i<SNOW_PARTS;i++){
    snow.push({
        x: Math.random()*canvas.width,
        y: Math.random()*canvas.height,
        r: Math.random()*2+1,
        s: Math.random()*0.5+0.2
    });
}

function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // ---- 雪 ----
    ctx.fillStyle="white";
    snow.forEach(s=>{
        s.y+=s.s;
        if(s.y>canvas.height){s.y=0;s.x=Math.random()*canvas.width;}
        ctx.globalAlpha=0.8;
        ctx.beginPath();
        ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
        ctx.fill();
    });

    // ---- 地面光环 ----
    const grd = ctx.createRadialGradient(
        centerX(),baseY(),10,
        centerX(),baseY(),200
    );
    grd.addColorStop(0,"rgba(255,255,255,.4)");
    grd.addColorStop(1,"rgba(255,255,255,0)");
    ctx.fillStyle=grd;
    ctx.beginPath();
    ctx.arc(centerX(),baseY(),200,0,Math.PI*2);
    ctx.fill();

    // ---- 圣诞树 ----
    particles.forEach(p=>{
        p.angle += p.speed;

        const h = p.t * canvas.height*0.55;
        const radius = (1-p.t) * 160;
        const x = centerX() + Math.cos(p.angle)*radius;
        const y = baseY() - h;

        ctx.globalAlpha = 0.5 + Math.sin(p.angle*2)*0.5;
        ctx.fillStyle = p.t<0.3 ? "#ffdede" : "#ffb3b3";
        ctx.beginPath();
        ctx.arc(x,y,p.size,0,Math.PI*2);
        ctx.fill();
    });

    // ---- 树顶光 ----
    ctx.globalAlpha=1;
    ctx.fillStyle="white";
    ctx.beginPath();
    ctx.arc(centerX(),baseY()-canvas.height*0.55,6,0,Math.PI*2);
    ctx.fill();

    requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>
